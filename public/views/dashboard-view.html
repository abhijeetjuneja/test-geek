<!--Main Dashboard -->
<div class=" container-fluid user-dashboard " ng-if="dashboard.admin">
    <!--Admin Dashboard Head-->
    <div class="row container-fluid dashboard-head col-lg-11" >
        <!-- Grid column -->
            <div class="col-md-12 mt-2">
        
                <h4><strong><i class="fa fa-ticket"></i>Admin Dashboard</strong></h4>                
        
            </div>
    </div>

    <div class="container-fluid row" style="padding-right: 0;padding-left: 30px;">
        <div class="col-lg-4 offset-md-1 mt-2 mb-2">
            <!--Card Dark-->
            <div class="card card-dark" style="margin-bottom: 3vh;box-shadow: none!important;">
                <!--Card image-->
                <div class="view overlay hm-white-slight">
                    <img src="./../images/tests.jpg" class="img-fluid img-responsive" alt="">
                    <a>
                        <div class="mask"></div>
                    </a>
                </div>
                <!--/.Card image-->
                <!--Card content-->
                <div class="card-body">
                    <!--Social shares button-->
                    <a class="activator"><i class="fa fa-share-alt white-text"></i></a>
                    <!--Title-->
                    <h4 class="card-title text-center">Tests</h4>
                    <div class="row text-center">
                        <div class="col-lg-6">
                            <a href="/tests/create"><button class="btn btn-primary ">Create</button></a>
                        </div>
                        <div class="col-lg-6">
                            <a href="/admin/tests/view"><button class="btn btn-primary ">View</button></a>
                        </div>
                    </div>
                </div>
                <!--/.Card content-->
            </div>
            <!--/.Card Dark-->
        </div>
        <div class="col-lg-4  offset-md-2 mt-2">
            <!--Card Dark-->
            <div class="card card-dark"  style="margin-bottom: 3vh;box-shadow: none!important;">
                <!--Card image-->
                <div class="view overlay hm-white-slight">
                    <img src="./../images/user.jpg" style="margin-bottom: 3vh;" class="img-fluid img-responsive" alt="">
                    <a>
                        <div class="mask"></div>
                    </a>
                </div>
                <!--/.Card image-->
                <!--Card content-->
                <div class="card-body">
                    <!--Social shares button-->
                    <a class="activator"><i class="fa fa-share-alt white-text"></i></a>
                    <!--Title-->
                    <h4 class="card-title text-center">Users</h4>
                    <div class="row text-center">
                        <div class="col-lg-12">
                            <a href="/admin/users/all/"><button class="btn btn-primary">View</button></a>
                        </div>
                    </div>
                </div>
                <!--/.Card content-->
            </div>
            <!--/.Card Dark-->
        </div>
        <div class="col-lg-3 mt-2">
        </div>
    </div>
    

    
</div> 

<!--Main Dashboard -->
<div class=" container-fluid user-dashboard" ng-if="!dashboard.admin">
    <!--Admin Dashboard Head-->
    <div class="row container-fluid dashboard-head col-sm-12 col-lg-11" >
        <!-- Grid column -->
            <div class="col-md-12 mt-2">
        
                <p><strong><i class="fa fa-ticket"></i>My Stats</strong><p>                
        
            </div>
    </div>
    <div class="row container-fluid user-dashboard-stats-parent-div text-center col-lg-11" style="margin-bottom: 0;">
        <div class="col-sm-12 col-md-3 row user-stats-entry" >
            <div class="col-sm-5 col-md-3" style="background-color: red">
                <i class="fa fa-times fa-2x" style="color:white;margin-top:2vh;margin-bottom: 2vh;"></i>
            </div>
            <div class="col-sm-6 col-md-9">
                <strong>
                    <h2 style="color: red;">{{dashboard.incorrectAnswers}}</h2>
                    <p1>INCORRECT ANSWERS</p1>
                </strong>
            </div>
        </div>
        <div class="col-sm-12 col-md-3 row user-stats-entry" >
            <div class="col-md-3" style="background-color: purple;padding: 0;">
                <i class="fa fa-circle-o fa-2x" style="color:white;margin-top:2vh;margin-bottom: 2vh;"></i>
            </div>
            <div class="col-md-9">
                <strong>
                    <h2 style="color: purple;">{{dashboard.unattempted}}</h2>
                    <p1>UNATTEMPTED</p1>
                </strong>
            </div>
        </div>
        <div class="col-sm-12 col-md-3 row user-stats-entry" >
            <div class="col-md-3" style="background-color: green">
                <i class="fa fa-check fa-2x" style="color:white;margin-top:2vh;margin-bottom: 2vh;"></i>
            </div>
            <div class="col-md-9">
                <strong>
                    <h2 style="color: green;">{{dashboard.correctAnswers}}</h2>
                    <p1>CORRECT ANSWERS</p1>
                </strong>
            </div>
        </div>
    </div>
    <div class="row container-fluid user-dashboard-stats-parent-div text-center col-sm-12 col-lg-11">
        <div class="col-sm-12 col-md-3 row user-stats-entry">  
            <div class="col-md-3" style="background-color: #B56703">
                <i class="fa fa-percent fa-2x" style="color:white;margin-top:2vh;"></i>
            </div>
            <div class="col-md-9">
                <strong>
                    <h2 style="color: #B56703;">{{dashboard.averagePercentage}}</h2>
                    <p1>AVERAGE PERCENTAGE</p1>
                </strong>
            </div>              
        </div>
        <div class="col-sm-12 col-md-3 row user-stats-entry">
            <div class="col-md-3" style="background-color: #B50391">
                <i class="fa fa-pencil-square-o fa-2x" style="color:white;margin-top:2vh;"></i>
            </div>
            <div class="col-md-9">
                <strong>
                    <h2 style="color: #B50391;">{{dashboard.testsTaken}}</h2>
                    <p1>TESTS TAKEN</p1>
                </strong>
            </div>
        </div>
        <div class="col-sm-12  col-md-3 row user-stats-entry">
            <div class="col-md-3" style="background-color: #039DB5">
                <i class="fa fa-clock-o fa-2x" style="color:white;margin-top:2vh;"></i>
            </div>
            <div class="col-md-9">
                <strong>
                    <h2 style="color: #039DB5;">{{dashboard.averageTimeTaken}} mins</h2>
                    <p1>AVERAGE TEST TIME</p1>
                </strong>
            </div>
        </div>            
        <div class="col-sm-12 col-md-11 user-stats-entry" style="padding:0;" ng-show="dashboard.allResults.length">
            <div class="container-fluid" style="color: white;background-color: #4188e0;padding-top: 1.5vh;padding-bottom: 1.5vh;">
                <strong>
                    <h4>My Percentages in Tests</h4>
                </strong>
            </div>
            <canvas id="myChart"></canvas>
        </div>
        
    </div>

    <!--Admin Dashboard Head-->
    <div class="row container-fluid dashboard-head col-sm-12 col-lg-11" ng-if="dashboard.allResults.length">
        <!-- Grid column -->
            <div class="col-md-12 mt-2">
        
                <p><strong><i class="fa fa-ticket"></i>My Tests</strong><p>                
        
            </div>
    </div>

        
       <div class="user-stats-entry col-sm-12 col-lg-11 table-responsive text-center" style="padding:0;" ng-if="dashboard.allResults.length">
            <!--Table-->
            <table class="table table-striped table-wrapper-2">

                <!--Table head-->
                <thead style="color: white;background-color: #4188e0;padding-top: 1.5vh;padding-bottom: 1.5vh;">
                    <strong>
                       <tr>
                            <th>No.</th>
                            <th>Test Name</th>
                            <th>Score</th>
                            <th>Percentage</th>
                            <th>View</th>
                        </tr> 
                    </strong>
                    
                </thead>
                <!--Table head-->

                <!--Table body-->
                <tbody>
                    <!--All Queries -->
                    <tr ng-repeat="result in filtered = (dashboard.allResults) | startFrom:dashboard.currentPage*dashboard.pageSize | limitTo:dashboard.pageSize" >
                        <td><b>{{$index+1}}</td>
                        <td ><b>{{result.test.testName}}</td>
                        <td ><b>{{result.testScore}}/{{result.testTotalMarks}}</b></td>
                        <td  ><b>{{result.testPercentage}} %</b></td>
                        <td id="test-title"><b><button class="btn btn-info btn-sm" style="margin:0;" ng-click = "dashboard.getResult(result._id);">View</button></b></td>
                    </tr>  
                </tbody>
                <!--Table body-->
                <!--Pagination -->
                
            </table>
            <!--Table-->
            <div class="text-center table-buttons">
                    <button class="btn btn-default  dash-button" ng-disabled="dashboard.currentPage+1 == 1" ng-click="dashboard.currentPage=dashboard.currentPage-1">
                        Previous
                    </button> 
                    <strong>{{dashboard.currentPage+1}}/{{dashboard.numberOfPages(filtered.length)}}</strong>
                    <button class="btn btn-default  dash-button" ng-disabled="dashboard.currentPage+1 >= dashboard.numberOfPages(filtered.length)" ng-click="dashboard.currentPage=dashboard.currentPage+1">
                        Next
                    </button> 
                </div>
             

        </div>
        <div class="user-stats-entry col-sm-12 col-lg-11 table-responsive text-center" style="margin-bottom: 40vh;padding:0;" ng-if="!dashboard.allResults.length && !dashboard.admin">
            <div class="container-fluid" style="background-color:#4a4b6f;color:white;padding-top: 2vh;padding-bottom: 2vh;">
                <strong>
                    <h2>No Tests Given</h2>
                    <a href = "/user/tests/all"><button class="btn btn-success btn-lg">Take a Test</button></a>
                </strong>
            </div> 
        </div>
            
    
</div> 



